let restaurants,neighborhoods,cuisines;var map,markers=[];document.addEventListener("DOMContentLoaded",e=>{fetchNeighborhoods(),fetchCuisines()}),fetchNeighborhoods=(()=>{DBHelper.fetchNeighborhoods((e,t)=>{e?console.error(e):(self.neighborhoods=t,fillNeighborhoodsHTML())})}),fillNeighborhoodsHTML=((e=self.neighborhoods)=>{const t=document.getElementById("neighborhoods-select");e.forEach(e=>{const n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})}),fetchCuisines=(()=>{DBHelper.fetchCuisines((e,t)=>{e?console.error(e):(self.cuisines=t,fillCuisinesHTML())})}),fillCuisinesHTML=((e=self.cuisines)=>{const t=document.getElementById("cuisines-select");e.forEach(e=>{const n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})}),window.initMap=(()=>{self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants()}),updateRestaurants=(()=>{const e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e.selectedIndex,a=t.selectedIndex,s=e[n].value,r=t[a].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(s,r,(e,t)=>{e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})}),resetRestaurants=(e=>{self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers.forEach(e=>e.setMap(null)),self.markers=[],self.restaurants=e}),fillRestaurantsHTML=((e=self.restaurants)=>{const t=document.getElementById("restaurants-list");e.forEach(e=>{t.append(createRestaurantHTML(e))}),addMarkersToMap()}),createRestaurantHTML=(e=>{const t=document.createElement("li");t.className="card";const n=document.createElement("picture");t.append(n);const a=document.createElement("source");a.type="image/webp",a.srcset=DBHelper.imageRespForRestaurant(e,"large","webp"),a.media="(min-width: 511px) and (max-width: 640px)",n.append(a);const s=document.createElement("source");s.type="image/webp",s.srcset=DBHelper.imageRespForRestaurant(e,"medium","webp"),s.media="(min-width: 411px) and (max-width: 510px),\n                       (min-width: 791px) and (max-width: 930px),\n                       (min-width: 1191px)",n.append(s);const r=document.createElement("source");r.type="image/webp",r.srcset=DBHelper.imageRespForRestaurant(e,"small","webp"),r.media="(max-width: 410px),\n                       (min-width: 650px) and (max-width: 800px),\n                       (min-width: 950px) and (max-width: 1200px)",n.append(r);const o=document.createElement("source");o.type="image/jpeg",o.srcset=DBHelper.imageRespForRestaurant(e,"large"),o.media="(min-width: 511px) and (max-width: 640px)",n.append(o);const i=document.createElement("source");i.type="image/jpeg",i.srcset=DBHelper.imageRespForRestaurant(e,"medium"),i.media="(min-width: 411px) and (max-width: 510px),\n                         (min-width: 791px) and (max-width: 930px),\n                         (min-width: 1191px)",n.append(i);const d=document.createElement("img");d.type="image/jpeg",d.className="card__img",d.srcset=DBHelper.imageRespForRestaurant(e,"small"),d.media="(max-width: 410px),\n                         (min-width: 650px) and (max-width: 800px),\n                         (min-width: 950px) and (max-width: 1200px)",d.alt=`${e.name} - ${e.photo_description}`,n.append(d);const c=document.createElement("h3");c.className="card__title",c.innerHTML=e.name,t.append(c);const m=document.createElement("p");m.className="card__description",m.innerHTML=e.neighborhood,t.append(m);const p=document.createElement("p");p.className="card__description",p.innerHTML=e.address,t.append(p);const l=document.createElement("a");return l.className="card__button",l.setAttribute("role","button"),l.setAttribute("aria-label","Go to restaurant details"),l.innerHTML="View Details",l.href=DBHelper.urlForRestaurant(e),t.append(l),t}),addMarkersToMap=((e=self.restaurants)=>{e.forEach(e=>{const t=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",()=>{window.location.href=t.url}),self.markers.push(t)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJuZWlnaGJvcmhvb2RzIiwiY3Vpc2luZXMiLCJtYXAiLCJtYXJrZXJzIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJmZXRjaE5laWdoYm9yaG9vZHMiLCJmZXRjaEN1aXNpbmVzIiwiREJIZWxwZXIiLCJlcnJvciIsImNvbnNvbGUiLCJzZWxmIiwiZmlsbE5laWdoYm9yaG9vZHNIVE1MIiwic2VsZWN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJmb3JFYWNoIiwibmVpZ2hib3Job29kIiwib3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInZhbHVlIiwiYXBwZW5kIiwiZmlsbEN1aXNpbmVzSFRNTCIsImN1aXNpbmUiLCJ3aW5kb3ciLCJpbml0TWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsInpvb20iLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJzY3JvbGx3aGVlbCIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiY1NlbGVjdCIsIm5TZWxlY3QiLCJjSW5kZXgiLCJzZWxlY3RlZEluZGV4IiwibkluZGV4IiwiZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kIiwicmVzZXRSZXN0YXVyYW50cyIsImZpbGxSZXN0YXVyYW50c0hUTUwiLCJtIiwic2V0TWFwIiwidWwiLCJyZXN0YXVyYW50IiwiY3JlYXRlUmVzdGF1cmFudEhUTUwiLCJhZGRNYXJrZXJzVG9NYXAiLCJsaSIsImNsYXNzTmFtZSIsInBpY3R1cmUiLCJXZWJwX2xhcmdlIiwidHlwZSIsInNyY3NldCIsImltYWdlUmVzcEZvclJlc3RhdXJhbnQiLCJtZWRpYSIsIldlYlBfbWVkaXVtIiwiV2ViUF9zbWFsbCIsIkpwZ19sYXJnZSIsIkpwZ19tZWRpdW0iLCJpbWFnZV9zbWFsbCIsImFsdCIsIm5hbWUiLCJwaG90b19kZXNjcmlwdGlvbiIsImFkZHJlc3MiLCJtb3JlIiwic2V0QXR0cmlidXRlIiwiaHJlZiIsInVybEZvclJlc3RhdXJhbnQiLCJtYXJrZXIiLCJtYXBNYXJrZXJGb3JSZXN0YXVyYW50IiwiYWRkTGlzdGVuZXIiLCJsb2NhdGlvbiIsInVybCIsInB1c2giXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLFlBQWFDLGNBQWVDLFNBQ2hDLElBQUlDLElBQ0FDLFdBS0pDLFNBQVNDLGlCQUFpQixtQkFBb0JDLElBQzVDQyxxQkFDQUMsa0JBTUZELG1CQUFxQixNQUNuQkUsU0FBU0YsbUJBQW1CLENBQUNHLEVBQU9WLEtBQzlCVSxFQUVGQyxRQUFRRCxNQUFNQSxJQUVkRSxLQUFLWixjQUFnQkEsRUFDckJhLDZCQVFOQSxzQkFBd0IsRUFBQ2IsRUFBZ0JZLEtBQUtaLGlCQUM1QyxNQUFNYyxFQUFTVixTQUFTVyxlQUFlLHdCQUN2Q2YsRUFBY2dCLFFBQVFDLElBQ3BCLE1BQU1DLEVBQVNkLFNBQVNlLGNBQWMsVUFDdENELEVBQU9FLFVBQVlILEVBQ25CQyxFQUFPRyxNQUFRSixFQUNmSCxFQUFPUSxPQUFPSixPQU9sQlYsY0FBZ0IsTUFDZEMsU0FBU0QsY0FBYyxDQUFDRSxFQUFPVCxLQUN6QlMsRUFFRkMsUUFBUUQsTUFBTUEsSUFFZEUsS0FBS1gsU0FBV0EsRUFDaEJzQix3QkFRTkEsaUJBQW1CLEVBQUN0QixFQUFXVyxLQUFLWCxZQUNsQyxNQUFNYSxFQUFTVixTQUFTVyxlQUFlLG1CQUV2Q2QsRUFBU2UsUUFBUVEsSUFDZixNQUFNTixFQUFTZCxTQUFTZSxjQUFjLFVBQ3RDRCxFQUFPRSxVQUFZSSxFQUNuQk4sRUFBT0csTUFBUUcsRUFDZlYsRUFBT1EsT0FBT0osT0FPbEJPLE9BQU9DLFFBQVUsTUFLZmQsS0FBS1YsSUFBTSxJQUFJeUIsT0FBT0MsS0FBS0MsSUFBSXpCLFNBQVNXLGVBQWUsUUFDckRlLEtBQU0sR0FDTkMsUUFMQUMsSUFBSyxVQUNMQyxLQUFNLFdBS05DLGFBQWEsSUFFZkMsc0JBTUZBLGtCQUFvQixNQUNsQixNQUFNQyxFQUFVaEMsU0FBU1csZUFBZSxtQkFDbENz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LE9BQVEsVUFDMUJELEVBQUtDLGFBQWEsYUFBYyw0QkFDaENELEVBQUsvQyxVQUFZLGVBQ2pCK0MsRUFBS0UsS0FBTzVELFNBQVM2RCxpQkFBaUJ2QixHQUN0Q0csRUFBRzVCLE9BQU82QyxHQUVIakIsSUFNVEQsZ0JBQWtCLEVBQUNsRCxFQUFjYSxLQUFLYixlQUNwQ0EsRUFBWWlCLFFBQVErQixJQUVsQixNQUFNd0IsRUFBUzlELFNBQVMrRCx1QkFBdUJ6QixFQUFZbkMsS0FBS1YsS0FDaEV5QixPQUFPQyxLQUFLdEIsTUFBTW1FLFlBQVlGLEVBQVEsUUFBUyxLQUM3QzlDLE9BQU9pRCxTQUFTTCxLQUFPRSxFQUFPSSxNQUVoQy9ELEtBQUtULFFBQVF5RSxLQUFLTCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHJlc3RhdXJhbnRzLCBuZWlnaGJvcmhvb2RzLCBjdWlzaW5lcztcclxudmFyIG1hcDtcclxudmFyIG1hcmtlcnMgPSBbXTtcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBuZWlnaGJvcmhvb2RzIGFuZCBjdWlzaW5lcyBhcyBzb29uIGFzIHRoZSBwYWdlIGlzIGxvYWRlZC5cclxuICovXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGV2ZW50ID0+IHtcclxuICBmZXRjaE5laWdoYm9yaG9vZHMoKTtcclxuICBmZXRjaEN1aXNpbmVzKCk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEZldGNoIGFsbCBuZWlnaGJvcmhvb2RzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmZldGNoTmVpZ2hib3Job29kcyA9ICgpID0+IHtcclxuICBEQkhlbHBlci5mZXRjaE5laWdoYm9yaG9vZHMoKGVycm9yLCBuZWlnaGJvcmhvb2RzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgLy8gR290IGFuIGVycm9yXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VsZi5uZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcztcclxuICAgICAgZmlsbE5laWdoYm9yaG9vZHNIVE1MKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IG5laWdoYm9yaG9vZHMgSFRNTC5cclxuICovXHJcbmZpbGxOZWlnaGJvcmhvb2RzSFRNTCA9IChuZWlnaGJvcmhvb2RzID0gc2VsZi5uZWlnaGJvcmhvb2RzKSA9PiB7XHJcbiAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZWlnaGJvcmhvb2RzLXNlbGVjdFwiKTtcclxuICBuZWlnaGJvcmhvb2RzLmZvckVhY2gobmVpZ2hib3Job29kID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gbmVpZ2hib3Job29kO1xyXG4gICAgb3B0aW9uLnZhbHVlID0gbmVpZ2hib3Job29kO1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEZldGNoIGFsbCBjdWlzaW5lcyBhbmQgc2V0IHRoZWlyIEhUTUwuXHJcbiAqL1xyXG5mZXRjaEN1aXNpbmVzID0gKCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoQ3Vpc2luZXMoKGVycm9yLCBjdWlzaW5lcykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZWxmLmN1aXNpbmVzID0gY3Vpc2luZXM7XHJcbiAgICAgIGZpbGxDdWlzaW5lc0hUTUwoKTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgY3Vpc2luZXMgSFRNTC5cclxuICovXHJcbmZpbGxDdWlzaW5lc0hUTUwgPSAoY3Vpc2luZXMgPSBzZWxmLmN1aXNpbmVzKSA9PiB7XHJcbiAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjdWlzaW5lcy1zZWxlY3RcIik7XHJcblxyXG4gIGN1aXNpbmVzLmZvckVhY2goY3Vpc2luZSA9PiB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IGN1aXNpbmU7XHJcbiAgICBvcHRpb24udmFsdWUgPSBjdWlzaW5lO1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cclxuICovXHJcbndpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xyXG4gIGxldCBsb2MgPSB7XHJcbiAgICBsYXQ6IDQwLjcyMjIxNixcclxuICAgIGxuZzogLTczLjk4NzUwMVxyXG4gIH07XHJcbiAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwXCIpLCB7XHJcbiAgICB6b29tOiAxMixcclxuICAgIGNlbnRlcjogbG9jLFxyXG4gICAgc2Nyb2xsd2hlZWw6IGZhbHNlXHJcbiAgfSk7XHJcbiAgdXBkYXRlUmVzdGF1cmFudHMoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgcGFnZSBhbmQgbWFwIGZvciBjdXJyZW50IHJlc3RhdXJhbnRzLlxyXG4gKi9cclxudXBkYXRlUmVzdGF1cmFudHMgPSAoKSA9PiB7XHJcbiAgY29uc3QgY1NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3Vpc2luZXMtc2VsZWN0XCIpO1xyXG4gIGNvbnN0IG5TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5laWdoYm9yaG9vZHMtc2VsZWN0XCIpO1xyXG5cclxuICBjb25zdCBjSW5kZXggPSBjU2VsZWN0LnNlbGVjdGVkSW5kZXg7XHJcbiAgY29uc3QgbkluZGV4ID0gblNlbGVjdC5zZWxlY3RlZEluZGV4O1xyXG5cclxuICBjb25zdCBjdWlzaW5lID0gY1NlbGVjdFtjSW5kZXhdLnZhbHVlO1xyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IG5TZWxlY3RbbkluZGV4XS52YWx1ZTtcclxuXHJcbiAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kKFxyXG4gICAgY3Vpc2luZSxcclxuICAgIG5laWdoYm9yaG9vZCxcclxuICAgIChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc2V0UmVzdGF1cmFudHMocmVzdGF1cmFudHMpO1xyXG4gICAgICAgIGZpbGxSZXN0YXVyYW50c0hUTUwoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ2xlYXIgY3VycmVudCByZXN0YXVyYW50cywgdGhlaXIgSFRNTCBhbmQgcmVtb3ZlIHRoZWlyIG1hcCBtYXJrZXJzLlxyXG4gKi9cclxucmVzZXRSZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzID0+IHtcclxuICAvLyBSZW1vdmUgYWxsIHJlc3RhdXJhbnRzXHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IFtdO1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN0YXVyYW50cy1saXN0XCIpO1xyXG4gIHVsLmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gIC8vIFJlbW92ZSBhbGwgbWFwIG1hcmtlcnNcclxuICBzZWxmLm1hcmtlcnMuZm9yRWFjaChtID0+IG0uc2V0TWFwKG51bGwpKTtcclxuICBzZWxmLm1hcmtlcnMgPSBbXTtcclxuICBzZWxmLnJlc3RhdXJhbnRzID0gcmVzdGF1cmFudHM7XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFsbCByZXN0YXVyYW50cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmZpbGxSZXN0YXVyYW50c0hUTUwgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3RhdXJhbnRzLWxpc3RcIik7XHJcbiAgcmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcclxuICAgIHVsLmFwcGVuZChjcmVhdGVSZXN0YXVyYW50SFRNTChyZXN0YXVyYW50KSk7XHJcbiAgfSk7XHJcbiAgYWRkTWFya2Vyc1RvTWFwKCk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTC5cclxuICovXHJcbmNyZWF0ZVJlc3RhdXJhbnRIVE1MID0gcmVzdGF1cmFudCA9PiB7XHJcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgbGkuY2xhc3NOYW1lID0gXCJjYXJkXCI7XHJcblxyXG4gIGNvbnN0IHBpY3R1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicGljdHVyZVwiKTtcclxuICBsaS5hcHBlbmQocGljdHVyZSk7XHJcblxyXG4gIC8qIFNvdXJjZXMgV2ViUCBJbWFnZXMgKi9cclxuICBjb25zdCBXZWJwX2xhcmdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKTtcclxuICBXZWJwX2xhcmdlLnR5cGUgPSBcImltYWdlL3dlYnBcIjtcclxuICBXZWJwX2xhcmdlLnNyY3NldCA9IERCSGVscGVyLmltYWdlUmVzcEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgJ2xhcmdlJywgJ3dlYnAnKTs7XHJcbiAgV2VicF9sYXJnZS5tZWRpYSA9IGAobWluLXdpZHRoOiA1MTFweCkgYW5kIChtYXgtd2lkdGg6IDY0MHB4KWA7XHJcbiAgcGljdHVyZS5hcHBlbmQoV2VicF9sYXJnZSk7XHJcblxyXG4gIGNvbnN0IFdlYlBfbWVkaXVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKTtcclxuICBXZWJQX21lZGl1bS50eXBlID0gXCJpbWFnZS93ZWJwXCI7XHJcbiAgV2ViUF9tZWRpdW0uc3Jjc2V0ID0gREJIZWxwZXIuaW1hZ2VSZXNwRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCAnbWVkaXVtJywgJ3dlYnAnKTs7XHJcbiAgV2ViUF9tZWRpdW0ubWVkaWEgPSBgKG1pbi13aWR0aDogNDExcHgpIGFuZCAobWF4LXdpZHRoOiA1MTBweCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgKG1pbi13aWR0aDogNzkxcHgpIGFuZCAobWF4LXdpZHRoOiA5MzBweCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgKG1pbi13aWR0aDogMTE5MXB4KWA7XHJcbiAgcGljdHVyZS5hcHBlbmQoV2ViUF9tZWRpdW0pO1xyXG5cclxuICBjb25zdCBXZWJQX3NtYWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKTtcclxuICBXZWJQX3NtYWxsLnR5cGUgPSBcImltYWdlL3dlYnBcIjtcclxuICBXZWJQX3NtYWxsLnNyY3NldCA9IERCSGVscGVyLmltYWdlUmVzcEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgJ3NtYWxsJywgJ3dlYnAnKTs7XHJcbiAgV2ViUF9zbWFsbC5tZWRpYSA9IGAobWF4LXdpZHRoOiA0MTBweCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgKG1pbi13aWR0aDogNjUwcHgpIGFuZCAobWF4LXdpZHRoOiA4MDBweCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgKG1pbi13aWR0aDogOTUwcHgpIGFuZCAobWF4LXdpZHRoOiAxMjAwcHgpYDtcclxuICBwaWN0dXJlLmFwcGVuZChXZWJQX3NtYWxsKTtcclxuXHJcbiAgLyogU291cmNlcyBKUEVHIEltYWdlcyAqL1xyXG4gIGNvbnN0IEpwZ19sYXJnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzb3VyY2VcIik7XHJcbiAgSnBnX2xhcmdlLnR5cGUgPSBcImltYWdlL2pwZWdcIjtcclxuICBKcGdfbGFyZ2Uuc3Jjc2V0ID0gREJIZWxwZXIuaW1hZ2VSZXNwRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCAnbGFyZ2UnKTtcclxuICBKcGdfbGFyZ2UubWVkaWEgPSBgKG1pbi13aWR0aDogNTExcHgpIGFuZCAobWF4LXdpZHRoOiA2NDBweClgO1xyXG4gIHBpY3R1cmUuYXBwZW5kKEpwZ19sYXJnZSk7XHJcblxyXG4gIGNvbnN0IEpwZ19tZWRpdW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic291cmNlXCIpO1xyXG4gIEpwZ19tZWRpdW0udHlwZSA9IFwiaW1hZ2UvanBlZ1wiO1xyXG4gIEpwZ19tZWRpdW0uc3Jjc2V0ID0gREJIZWxwZXIuaW1hZ2VSZXNwRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCAnbWVkaXVtJyk7XHJcbiAgSnBnX21lZGl1bS5tZWRpYSA9IGAobWluLXdpZHRoOiA0MTFweCkgYW5kIChtYXgtd2lkdGg6IDUxMHB4KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIChtaW4td2lkdGg6IDc5MXB4KSBhbmQgKG1heC13aWR0aDogOTMwcHgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKG1pbi13aWR0aDogMTE5MXB4KWA7XHJcbiAgcGljdHVyZS5hcHBlbmQoSnBnX21lZGl1bSk7XHJcblxyXG4gIGNvbnN0IGltYWdlX3NtYWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZV9zbWFsbC50eXBlID0gXCJpbWFnZS9qcGVnXCI7XHJcbiAgaW1hZ2Vfc21hbGwuY2xhc3NOYW1lID0gXCJjYXJkX19pbWdcIjtcclxuICBpbWFnZV9zbWFsbC5zcmNzZXQgPSBEQkhlbHBlci5pbWFnZVJlc3BGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsICdzbWFsbCcpO1xyXG4gIGltYWdlX3NtYWxsLm1lZGlhID0gYChtYXgtd2lkdGg6IDQxMHB4KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIChtaW4td2lkdGg6IDY1MHB4KSBhbmQgKG1heC13aWR0aDogODAwcHgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKG1pbi13aWR0aDogOTUwcHgpIGFuZCAobWF4LXdpZHRoOiAxMjAwcHgpYDtcclxuICBpbWFnZV9zbWFsbC5hbHQgPSBgJHtyZXN0YXVyYW50Lm5hbWV9IC0gJHtyZXN0YXVyYW50LnBob3RvX2Rlc2NyaXB0aW9ufWA7XHJcbiAgcGljdHVyZS5hcHBlbmQoaW1hZ2Vfc21hbGwpO1xyXG5cclxuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xyXG4gIG5hbWUuY2xhc3NOYW1lID0gXCJjYXJkX190aXRsZVwiO1xyXG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xyXG4gIGxpLmFwcGVuZChuYW1lKTtcclxuXHJcbiAgY29uc3QgbmVpZ2hib3Job29kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgbmVpZ2hib3Job29kLmNsYXNzTmFtZSA9IFwiY2FyZF9fZGVzY3JpcHRpb25cIjtcclxuICBuZWlnaGJvcmhvb2QuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uZWlnaGJvcmhvb2Q7XHJcbiAgbGkuYXBwZW5kKG5laWdoYm9yaG9vZCk7XHJcblxyXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICBhZGRyZXNzLmNsYXNzTmFtZSA9IFwiY2FyZF9fZGVzY3JpcHRpb25cIjtcclxuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcclxuICBsaS5hcHBlbmQoYWRkcmVzcyk7XHJcblxyXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBtb3JlLmNsYXNzTmFtZSA9IFwiY2FyZF9fYnV0dG9uXCI7XHJcbiAgbW9yZS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJyk7XHJcbiAgbW9yZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnR28gdG8gcmVzdGF1cmFudCBkZXRhaWxzJyk7XHJcbiAgbW9yZS5pbm5lckhUTUwgPSBcIlZpZXcgRGV0YWlsc1wiO1xyXG4gIG1vcmUuaHJlZiA9IERCSGVscGVyLnVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XHJcbiAgbGkuYXBwZW5kKG1vcmUpO1xyXG5cclxuICByZXR1cm4gbGk7XHJcbn07XHJcblxyXG4vKipcclxuICogQWRkIG1hcmtlcnMgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMgdG8gdGhlIG1hcC5cclxuICovXHJcbmFkZE1hcmtlcnNUb01hcCA9IChyZXN0YXVyYW50cyA9IHNlbGYucmVzdGF1cmFudHMpID0+IHtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgLy8gQWRkIG1hcmtlciB0byB0aGUgbWFwXHJcbiAgICBjb25zdCBtYXJrZXIgPSBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIHNlbGYubWFwKTtcclxuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbWFya2VyLnVybDtcclxuICAgIH0pO1xyXG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICB9KTtcclxufTtcclxuIl19
