let restaurant;var map;window.initMap=(()=>{fetchRestaurantFromURL((e,t)=>{e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})}),fetchRestaurantFromURL=(e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,(t,n)=>{self.restaurant=n,n?(fillRestaurantHTML(),e(null,n)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}),fillRestaurantHTML=((e=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;const t=document.getElementById("restaurant-photo"),n=document.createElement("source");n.type="image/webp",n.srcset=DBHelper.imageRespForRestaurant(e,"original","webp"),n.media="(min-width: 661px) and (max-width: 860px),\n                          (min-width: 1501)",t.append(n);const a=document.createElement("source");a.type="image/webp",a.srcset=DBHelper.imageRespForRestaurant(e,"large","webp"),a.media="(min-width: 461px) and (max-width: 660px), \n                      (min-width: 1061px) and (max-width: 1500px)",t.append(a);const r=document.createElement("source");r.type="image/webp",r.srcset=DBHelper.imageRespForRestaurant(e,"medium","webp"),r.media="(min-width: 361px) and (max-width: 460px),\n                        (min-width: 861px) and (max-width: 1060px)",t.append(r);const m=document.createElement("source");m.type="image/webp",m.srcset=DBHelper.imageRespForRestaurant(e,"small","webp"),m.media="(max-width: 360px)",t.append(m);const i=document.createElement("source");i.type="image/jpeg",i.srcset=DBHelper.imageRespForRestaurant(e,"original"),i.media="(min-width: 661px) and (max-width: 860px),\n                        (min-width: 1501)",t.append(i);const d=document.createElement("source");d.type="image/jpeg",d.srcset=DBHelper.imageRespForRestaurant(e,"large"),d.media="(min-width: 461px) and (max-width: 660px), \n                      (min-width: 1061px) and (max-width: 1500px)",t.append(d);const s=document.createElement("source");s.type="image/jpeg",s.srcset=DBHelper.imageRespForRestaurant(e,"medium"),s.media="(min-width: 361px) and (max-width: 460px),\n                      (min-width: 861px) and (max-width: 1060px)",t.append(s);const c=document.createElement("img");c.type="image/jpeg",c.srcset=DBHelper.imageRespForRestaurant(e,"small"),c.media="(max-width: 360px)",c.alt=`${e.name} - ${e.photo_description}`,t.append(c),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}),fillRestaurantHoursHTML=((e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours");for(let n in e){const a=document.createElement("tr"),r=document.createElement("td");r.innerHTML=n,r.className="day",a.appendChild(r);const m=document.createElement("td");m.innerHTML=e[n],m.className="time",a.appendChild(m),t.appendChild(a)}}),fillReviewsHTML=((e=self.restaurant.reviews)=>{const t=document.getElementById("reviews-container"),n=document.createElement("h3");if(n.innerHTML="Reviews",t.appendChild(n),!e){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void t.appendChild(e)}const a=document.getElementById("reviews-list");e.forEach(e=>{a.appendChild(createReviewHTML(e))}),t.appendChild(a)}),createReviewHTML=(e=>{const t=document.createElement("li");t.className="review__card";const n=document.createElement("div");n.className="review__header";const a=document.createElement("h4");a.innerHTML=e.name,a.className="review__name",n.appendChild(a);const r=document.createElement("span");r.innerHTML=e.date,r.className="review__date",n.appendChild(r),t.appendChild(n);const m=document.createElement("div");m.className="review__body";const i=document.createElement("span");i.innerHTML=`Rating: ${e.rating}`,i.className="review__rating";const d=document.createElement("i");d.className="fas fa-star",i.appendChild(d),m.appendChild(i);const s=document.createElement("p");return s.innerHTML=e.comments,s.className="review__comments",m.appendChild(s),t.appendChild(m),t}),fillBreadcrumb=((e=self.restaurant)=>{const t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)}),getParameterByName=((e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJyZXN0YXVyYW50IiwibWFwIiwid2luZG93IiwiaW5pdE1hcCIsImZldGNoUmVzdGF1cmFudEZyb21VUkwiLCJlcnJvciIsImNvbnNvbGUiLCJzZWxmIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ6b29tIiwiY2VudGVyIiwibGF0bG5nIiwic2Nyb2xsd2hlZWwiLCJmaWxsQnJlYWRjcnVtYiIsIkRCSGVscGVyIiwibWFwTWFya2VyRm9yUmVzdGF1cmFudCIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiZmlsbFJlc3RhdXJhbnRIVE1MIiwiaW5uZXJIVE1MIiwibmFtZSIsImFkZHJlc3MiLCJwaWN0dXJlIiwiV2VicF9vcmlnaW5hbCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwic3Jjc2V0IiwiaW1hZ2VSZXNwRm9yUmVzdGF1cmFudCIsIm1lZGlhIiwiYXBwZW5kIiwiV2VicF9sYXJnZSIsIldlYlBfbWVkaXVtIiwiV2ViUF9zbWFsbCIsIkpwZ19vcmlnaW5hbCIsIkpwZ19sYXJnZSIsIkpwZ19tZWRpdW0iLCJpbWFnZV9zbWFsbCIsImFsdCIsInBob3RvX2Rlc2NyaXB0aW9uIiwiY3Vpc2luZV90eXBlIiwib3BlcmF0aW5nX2hvdXJzIiwiZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwiLCJmaWxsUmV2aWV3c0hUTUwiLCJvcGVyYXRpbmdIb3VycyIsImhvdXJzIiwia2V5Iiwicm93IiwiZGF5IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJ0aW1lIiwicmV2aWV3cyIsImNvbnRhaW5lciIsInRpdGxlIiwibm9SZXZpZXdzIiwidWwiLCJmb3JFYWNoIiwicmV2aWV3IiwiY3JlYXRlUmV2aWV3SFRNTCIsImxpIiwiaGVhZGVyIiwiZGF0ZSIsImJvZHkiLCJyYXRpbmciLCJpY29uIiwiY29tbWVudHMiLCJicmVhZGNydW1iIiwidXJsIiwibG9jYXRpb24iLCJocmVmIiwicmVwbGFjZSIsInJlc3VsdHMiLCJSZWdFeHAiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxXQUNKLElBQUlDLElBS0pDLE9BQU9DLFFBQVUsTUFDYkMsdUJBQXVCLENBQUNDLEVBQU9MLEtBQ3ZCSyxFQUNBQyxRQUFRRCxNQUFNQSxJQUVkRSxLQUFLTixJQUFNLElBQUlPLE9BQU9DLEtBQUtDLElBQUlDLFNBQVNDLGVBQWUsUUFDbkRDLEtBQU0sR0FDTkMsT0FBUWQsRUFBV2UsT0FDbkJDLGFBQWEsSUFFakJDLGlCQUNBQyxTQUFTQyx1QkFBdUJaLEtBQUtQLFdBQVlPLEtBQUtOLFVBUWxFRyx1QkFBeUIsQ0FBQ2dCLElBQ3RCLEdBQUliLEtBQUtQLFdBRUwsWUFEQW9CLEVBQVMsS0FBTWIsS0FBS1AsWUFHeEIsTUFBTXFCLEVBQUtDLG1CQUFtQixNQUN6QkQsRUFJREgsU0FBU0ssb0JBQW9CRixFQUFJLENBQUNoQixFQUFPTCxLQUNyQ08sS0FBS1AsV0FBYUEsRUFDYkEsR0FJTHdCLHFCQUNBSixFQUFTLEtBQU1wQixJQUpYTSxRQUFRRCxNQUFNQSxNQU50QkEsTUFBUSwwQkFDUmUsRUFBU2YsTUFBTyxTQWlCeEJtQixtQkFBcUIsRUFBQ3hCLEVBQWFPLEtBQUtQLGNBQ3ZCVyxTQUFTQyxlQUFlLG1CQUNoQ2EsVUFBWXpCLEVBQVcwQixLQUVaZixTQUFTQyxlQUFlLHNCQUNoQ2EsVUFBWXpCLEVBQVcyQixRQUUvQixNQUFNQyxFQUFVakIsU0FBU0MsZUFBZSxvQkFHbENpQixFQUFnQmxCLFNBQVNtQixjQUFjLFVBQzdDRCxFQUFjRSxLQUFPLGFBQ3JCRixFQUFjRyxPQUFTZCxTQUFTZSx1QkFBdUJqQyxFQUFZLFdBQVksUUFDL0U2QixFQUFjSyxNQUFRLDBGQUV0Qk4sRUFBUU8sT0FBT04sR0FFZixNQUFNTyxFQUFhekIsU0FBU21CLGNBQWMsVUFDMUNNLEVBQVdMLEtB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bGV0IHJlc3RhdXJhbnQ7XG52YXIgbWFwO1xuXG4vKipcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cbiAqL1xud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XG4gICAgZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCgoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICAgICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xuICAgICAgICAgICAgICAgIHpvb206IDE2LFxuICAgICAgICAgICAgICAgIGNlbnRlcjogcmVzdGF1cmFudC5sYXRsbmcsXG4gICAgICAgICAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZpbGxCcmVhZGNydW1iKCk7XG4gICAgICAgICAgICBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHNlbGYucmVzdGF1cmFudCwgc2VsZi5tYXApO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8qKlxuICogR2V0IGN1cnJlbnQgcmVzdGF1cmFudCBmcm9tIHBhZ2UgVVJMLlxuICovXG5mZXRjaFJlc3RhdXJhbnRGcm9tVVJMID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgaWYgKHNlbGYucmVzdGF1cmFudCkgeyAvLyByZXN0YXVyYW50IGFscmVhZHkgZmV0Y2hlZCFcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgc2VsZi5yZXN0YXVyYW50KVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGlkID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCdpZCcpO1xuICAgIGlmICghaWQpIHsgLy8gbm8gaWQgZm91bmQgaW4gVVJMXG4gICAgICAgIGVycm9yID0gJ05vIHJlc3RhdXJhbnQgaWQgaW4gVVJMJ1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlJZChpZCwgKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgICAgICAgICBzZWxmLnJlc3RhdXJhbnQgPSByZXN0YXVyYW50O1xuICAgICAgICAgICAgaWYgKCFyZXN0YXVyYW50KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmlsbFJlc3RhdXJhbnRIVE1MKCk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlXG4gKi9cbmZpbGxSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50ID0gc2VsZi5yZXN0YXVyYW50KSA9PiB7XG4gICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LW5hbWUnKTtcbiAgICBuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcblxuICAgIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1hZGRyZXNzJyk7XG4gICAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XG5cbiAgICBjb25zdCBwaWN0dXJlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtcGhvdG8nKTtcblxuICAgIC8qIFNvdXJjZXMgV2ViUCBJbWFnZXMgKi9cbiAgICBjb25zdCBXZWJwX29yaWdpbmFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKTtcbiAgICBXZWJwX29yaWdpbmFsLnR5cGUgPSBcImltYWdlL3dlYnBcIjtcbiAgICBXZWJwX29yaWdpbmFsLnNyY3NldCA9IERCSGVscGVyLmltYWdlUmVzcEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgJ29yaWdpbmFsJywgJ3dlYnAnKTtcbiAgICBXZWJwX29yaWdpbmFsLm1lZGlhID0gYChtaW4td2lkdGg6IDY2MXB4KSBhbmQgKG1heC13aWR0aDogODYwcHgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAobWluLXdpZHRoOiAxNTAxKWA7XG4gICAgcGljdHVyZS5hcHBlbmQoV2VicF9vcmlnaW5hbCk7XG5cbiAgICBjb25zdCBXZWJwX2xhcmdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKTtcbiAgICBXZWJwX2xhcmdlLnR5cGUgPSBcImltYWdlL3dlYnBcIjtcbiAgICBXZWJwX2xhcmdlLnNyY3NldCA9IERCSGVscGVyLmltYWdlUmVzcEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgJ2xhcmdlJywgJ3dlYnAnKTtcbiAgICBXZWJwX2xhcmdlLm1lZGlhID0gYChtaW4td2lkdGg6IDQ2MXB4KSBhbmQgKG1heC13aWR0aDogNjYwcHgpLCBcbiAgICAgICAgICAgICAgICAgICAgICAobWluLXdpZHRoOiAxMDYxcHgpIGFuZCAobWF4LXdpZHRoOiAxNTAwcHgpYDtcbiAgICBwaWN0dXJlLmFwcGVuZChXZWJwX2xhcmdlKTtcblxuICAgIGNvbnN0IFdlYlBfbWVkaXVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKTtcbiAgICBXZWJQX21lZGl1bS50eXBlID0gXCJpbWFnZS93ZWJwXCI7XG4gICAgV2ViUF9tZWRpdW0uc3Jjc2V0ID0gREJIZWxwZXIuaW1hZ2VSZXNwRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCAnbWVkaXVtJywgJ3dlYnAnKTtcbiAgICBXZWJQX21lZGl1bS5tZWRpYSA9IGAobWluLXdpZHRoOiAzNjFweCkgYW5kIChtYXgtd2lkdGg6IDQ2MHB4KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIChtaW4td2lkdGg6IDg2MXB4KSBhbmQgKG1heC13aWR0aDogMTA2MHB4KWA7XG4gICAgcGljdHVyZS5hcHBlbmQoV2ViUF9tZWRpdW0pO1xuXG4gICAgY29uc3QgV2ViUF9zbWFsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzb3VyY2VcIik7XG4gICAgV2ViUF9zbWFsbC50eXBlID0gXCJpbWFnZS93ZWJwXCI7XG4gICAgV2ViUF9zbWFsbC5zcmNzZXQgPSBEQkhlbHBlci5pbWFnZVJlc3BGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsICdzbWFsbCcsICd3ZWJwJyk7XG4gICAgV2ViUF9zbWFsbC5tZWRpYSA9IGAobWF4LXdpZHRoOiAzNjBweClgO1xuICAgIHBpY3R1cmUuYXBwZW5kKFdlYlBfc21hbGwpO1xuXG4gICAgLyogU291cmNlcyBKUEVHIEltYWdlcyAqL1xuICAgIGNvbnN0IEpwZ19vcmlnaW5hbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzb3VyY2VcIik7XG4gICAgSnBnX29yaWdpbmFsLnR5cGUgPSBcImltYWdlL2pwZWdcIjtcbiAgICBKcGdfb3JpZ2luYWwuc3Jjc2V0ID0gREJIZWxwZXIuaW1hZ2VSZXNwRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCAnb3JpZ2luYWwnKTtcbiAgICBKcGdfb3JpZ2luYWwubWVkaWEgPSBgKG1pbi13aWR0aDogNjYxcHgpIGFuZCAobWF4LXdpZHRoOiA4NjBweCksXG4gICAgICAgICAgICAgICAgICAgICAgICAobWluLXdpZHRoOiAxNTAxKWA7XG4gICAgcGljdHVyZS5hcHBlbmQoSnBnX29yaWdpbmFsKTtcblxuICAgIGNvbnN0IEpwZ19sYXJnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzb3VyY2VcIik7XG4gICAgSnBnX2xhcmdlLnR5cGUgPSBcImltYWdlL2pwZWdcIjtcbiAgICBKcGdfbGFyZ2Uuc3Jjc2V0ID0gREJIZWxwZXIuaW1hZ2VSZXNwRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCAnbGFyZ2UnKTtcbiAgICBKcGdfbGFyZ2UubWVkaWEgPSBgKG1pbi13aWR0aDogNDYxcHgpIGFuZCAobWF4LXdpZHRoOiA2NjBweCksIFxuICAgICAgICAgICAgICAgICAgICAgIChtaW4td2lkdGg6IDEwNjFweCkgYW5kIChtYXgtd2lkdGg6IDE1MDBweClgO1xuICAgIHBpY3R1cmUuYXBwZW5kKEpwZ19sYXJnZSk7XG5cbiAgICBjb25zdCBKcGdfbWVkaXVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKTtcbiAgICBKcGdfbWVkaXVtLnR5cGUgPSBcImltYWdlL2pwZWdcIjtcbiAgICBKcGdfbWVkaXVtLnNyY3NldCA9IERCSGVscGVyLmltYWdlUmVzcEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgJ21lZGl1bScpO1xuICAgIEpwZ19tZWRpdW0ubWVkaWEgPSBgKG1pbi13aWR0aDogMzYxcHgpIGFuZCAobWF4LXdpZHRoOiA0NjBweCksXG4gICAgICAgICAgICAgICAgICAgICAgKG1pbi13aWR0aDogODYxcHgpIGFuZCAobWF4LXdpZHRoOiAxMDYwcHgpYDtcbiAgICBwaWN0dXJlLmFwcGVuZChKcGdfbWVkaXVtKTtcblxuICAgIGNvbnN0IGltYWdlX3NtYWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBpbWFnZV9zbWFsbC50eXBlID0gXCJpbWFnZS9qcGVnXCI7XG4gICAgaW1hZ2Vfc21hbGwuc3Jjc2V0ID0gREJIZWxwZXIuaW1hZ2VSZXNwRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCAnc21hbGwnKTtcbiAgICBpbWFnZV9zbWFsbC5tZWRpYSA9IGAobWF4LXdpZHRoOiAzNjBweClgO1xuICAgIGltYWdlX3NtYWxsLmFsdCA9IGAke3Jlc3RhdXJhbnQubmFtZX0gLSAke3Jlc3RhdXJhbnQucGhvdG9fZGVzY3JpcHRpb259YDtcbiAgICBwaWN0dXJlLmFwcGVuZChpbWFnZV9zbWFsbCk7XG5cbiAgICBjb25zdCBjdWlzaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtY3Vpc2luZScpO1xuICAgIGN1aXNpbmUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5jdWlzaW5lX3R5cGU7XG5cbiAgICAvLyBmaWxsIG9wZXJhdGluZyBob3Vyc1xuICAgIGlmIChyZXN0YXVyYW50Lm9wZXJhdGluZ19ob3Vycykge1xuICAgICAgICBmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCgpO1xuICAgIH1cbiAgICAvLyBmaWxsIHJldmlld3NcbiAgICBmaWxsUmV2aWV3c0hUTUwoKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBvcGVyYXRpbmcgaG91cnMgSFRNTCB0YWJsZSBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlLlxuICovXG5maWxsUmVzdGF1cmFudEhvdXJzSFRNTCA9IChvcGVyYXRpbmdIb3VycyA9IHNlbGYucmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnMpID0+IHtcbiAgICBjb25zdCBob3VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWhvdXJzJyk7XG4gICAgZm9yIChsZXQga2V5IGluIG9wZXJhdGluZ0hvdXJzKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICAgICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgZGF5LmlubmVySFRNTCA9IGtleTtcbiAgICAgICAgZGF5LmNsYXNzTmFtZSA9ICdkYXknO1xuICAgICAgICByb3cuYXBwZW5kQ2hpbGQoZGF5KTtcblxuICAgICAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgdGltZS5pbm5lckhUTUwgPSBvcGVyYXRpbmdIb3Vyc1trZXldO1xuICAgICAgICB0aW1lLmNsYXNzTmFtZSA9ICd0aW1lJztcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKHRpbWUpO1xuXG4gICAgICAgIGhvdXJzLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhbGwgcmV2aWV3cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cbiAqL1xuZmlsbFJldmlld3NIVE1MID0gKHJldmlld3MgPSBzZWxmLnJlc3RhdXJhbnQucmV2aWV3cykgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWNvbnRhaW5lcicpO1xuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgICB0aXRsZS5pbm5lckhUTUwgPSAnUmV2aWV3cyc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgIGlmICghcmV2aWV3cykge1xuICAgICAgICBjb25zdCBub1Jldmlld3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIG5vUmV2aWV3cy5pbm5lckhUTUwgPSAnTm8gcmV2aWV3cyB5ZXQhJztcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5vUmV2aWV3cyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0Jyk7XG4gICAgcmV2aWV3cy5mb3JFYWNoKHJldmlldyA9PiB7XG4gICAgICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSk7XG4gICAgfSk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHVsKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgcmV2aWV3IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAqL1xuY3JlYXRlUmV2aWV3SFRNTCA9IChyZXZpZXcpID0+IHtcbiAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgbGkuY2xhc3NOYW1lID0gJ3Jldmlld19fY2FyZCc7XG4gICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaGVhZGVyLmNsYXNzTmFtZSA9ICdyZXZpZXdfX2hlYWRlcic7XG5cbiAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDQnKTtcbiAgICBuYW1lLmlubmVySFRNTCA9IHJldmlldy5uYW1lO1xuICAgIG5hbWUuY2xhc3NOYW1lID0gJ3Jldmlld19fbmFtZSc7XG4gICAgaGVhZGVyLmFwcGVuZENoaWxkKG5hbWUpO1xuXG4gICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBkYXRlLmlubmVySFRNTCA9IHJldmlldy5kYXRlO1xuICAgIGRhdGUuY2xhc3NOYW1lID0gJ3Jldmlld19fZGF0ZSc7XG4gICAgaGVhZGVyLmFwcGVuZENoaWxkKGRhdGUpO1xuXG4gICAgbGkuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcblxuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBib2R5LmNsYXNzTmFtZSA9ICdyZXZpZXdfX2JvZHknO1xuXG4gICAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHJhdGluZy5pbm5lckhUTUwgPSBgUmF0aW5nOiAke3Jldmlldy5yYXRpbmd9YDtcbiAgICByYXRpbmcuY2xhc3NOYW1lID0gJ3Jldmlld19fcmF0aW5nJztcbiAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuICAgIGljb24uY2xhc3NOYW1lID0gJ2ZhcyBmYS1zdGFyJztcbiAgICByYXRpbmcuYXBwZW5kQ2hpbGQoaWNvbik7XG4gICAgYm9keS5hcHBlbmRDaGlsZChyYXRpbmcpO1xuXG4gICAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY29tbWVudHMuaW5uZXJIVE1MID0gcmV2aWV3LmNvbW1lbnRzO1xuICAgIGNvbW1lbnRzLmNsYXNzTmFtZSA9ICdyZXZpZXdfX2NvbW1lbnRzJztcbiAgICBib2R5LmFwcGVuZENoaWxkKGNvbW1lbnRzKTtcblxuICAgIGxpLmFwcGVuZENoaWxkKGJvZHkpO1xuXG4gICAgcmV0dXJuIGxpO1xufVxuXG4vKipcbiAqIEFkZCByZXN0YXVyYW50IG5hbWUgdG8gdGhlIGJyZWFkY3J1bWIgbmF2aWdhdGlvbiBtZW51XG4gKi9cbmZpbGxCcmVhZGNydW1iID0gKHJlc3RhdXJhbnQgPSBzZWxmLnJlc3RhdXJhbnQpID0+IHtcbiAgICBjb25zdCBicmVhZGNydW1iID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFkY3J1bWInKTtcbiAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgbGkuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuICAgIGJyZWFkY3J1bWIuYXBwZW5kQ2hpbGQobGkpO1xufVxuXG4vKipcbiAqIEdldCBhIHBhcmFtZXRlciBieSBuYW1lIGZyb20gcGFnZSBVUkwuXG4gKi9cbmdldFBhcmFtZXRlckJ5TmFtZSA9IChuYW1lLCB1cmwpID0+IHtcbiAgICBpZiAoIXVybClcbiAgICAgICAgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgJ1xcXFwkJicpO1xuICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgWz8mXSR7bmFtZX0oPShbXiYjXSopfCZ8I3wkKWApLFxuICAgICAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xuICAgIGlmICghcmVzdWx0cylcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKCFyZXN1bHRzWzJdKVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcbn0iXX0=
