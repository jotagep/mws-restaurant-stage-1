let restaurant;var map;window.initMap=(()=>{fetchRestaurantFromURL((e,t)=>{e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})}),fetchRestaurantFromURL=(e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,(t,n)=>{self.restaurant=n,n?(fillRestaurantHTML(),e(null,n)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}),fillRestaurantHTML=((e=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;const t=document.getElementById("restaurant-photo"),n=document.createElement("source");n.type="image/webp",n.srcset=DBHelper.imageRespForRestaurant(e,"original","webp"),n.media="(min-width: 661px) and (max-width: 860px),\n                          (min-width: 1501)",t.append(n);const a=document.createElement("source");a.type="image/webp",a.srcset=DBHelper.imageRespForRestaurant(e,"large","webp"),a.media="(min-width: 461px) and (max-width: 660px), \n                      (min-width: 1061px) and (max-width: 1500px)",t.append(a);const r=document.createElement("source");r.type="image/webp",r.srcset=DBHelper.imageRespForRestaurant(e,"medium","webp"),r.media="(min-width: 361px) and (max-width: 460px),\n                        (min-width: 861px) and (max-width: 1060px)",t.append(r);const m=document.createElement("source");m.type="image/webp",m.srcset=DBHelper.imageRespForRestaurant(e,"small","webp"),m.media="(max-width: 360px)",t.append(m);const i=document.createElement("source");i.type="image/jpeg",i.srcset=DBHelper.imageRespForRestaurant(e,"original"),i.media="(min-width: 661px) and (max-width: 860px),\n                        (min-width: 1501)",t.append(i);const d=document.createElement("source");d.type="image/jpeg",d.srcset=DBHelper.imageRespForRestaurant(e,"large"),d.media="(min-width: 461px) and (max-width: 660px), \n                      (min-width: 1061px) and (max-width: 1500px)",t.append(d);const s=document.createElement("source");s.type="image/jpeg",s.srcset=DBHelper.imageRespForRestaurant(e,"medium"),s.media="(min-width: 361px) and (max-width: 460px),\n                      (min-width: 861px) and (max-width: 1060px)",t.append(s);const c=document.createElement("img");c.type="image/jpeg",c.srcset=DBHelper.imageRespForRestaurant(e,"small"),c.media="(max-width: 360px)",c.alt=`${e.name} - ${e.photo_description}`,t.append(c),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}),fillRestaurantHoursHTML=((e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours");for(let n in e){const a=document.createElement("tr"),r=document.createElement("td");r.innerHTML=n,r.className="day",a.appendChild(r);const m=document.createElement("td");m.innerHTML=e[n],m.className="time",a.appendChild(m),t.appendChild(a)}}),fillReviewsHTML=((e=self.restaurant.reviews)=>{const t=document.getElementById("reviews-container"),n=document.createElement("h3");if(n.innerHTML="Reviews",t.appendChild(n),!e){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void t.appendChild(e)}const a=document.getElementById("reviews-list");e.forEach(e=>{a.appendChild(createReviewHTML(e))}),t.appendChild(a)}),createReviewHTML=(e=>{const t=document.createElement("li");t.className="review__card";const n=document.createElement("div");n.className="review__header";const a=document.createElement("h4");a.innerHTML=e.name,a.className="review__name",n.appendChild(a);const r=document.createElement("span");r.innerHTML=e.date,r.className="review__date",n.appendChild(r),t.appendChild(n);const m=document.createElement("div");m.className="review__body";const i=document.createElement("span");i.innerHTML=`Rating: ${e.rating}`,i.className="review__rating";const d=document.createElement("i");d.className="fas fa-star",i.appendChild(d),m.appendChild(i);const s=document.createElement("p");return s.innerHTML=e.comments,s.className="review__comments",m.appendChild(s),t.appendChild(m),t}),fillBreadcrumb=((e=self.restaurant)=>{const t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)}),getParameterByName=((e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJyZXN0YXVyYW50IiwibWFwIiwid2luZG93IiwiaW5pdE1hcCIsImZldGNoUmVzdGF1cmFudEZyb21VUkwiLCJlcnJvciIsImNvbnNvbGUiLCJzZWxmIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ6b29tIiwiY2VudGVyIiwibGF0bG5nIiwic2Nyb2xsd2hlZWwiLCJmaWxsQnJlYWRjcnVtYiIsIkRCSGVscGVyIiwibWFwTWFya2VyRm9yUmVzdGF1cmFudCIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiZmlsbFJlc3RhdXJhbnRIVE1MIiwiaW5uZXJIVE1MIiwibmFtZSIsImFkZHJlc3MiLCJwaWN0dXJlIiwiV2VicF9vcmlnaW5hbCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwic3Jjc2V0IiwiaW1hZ2VSZXNwRm9yUmVzdGF1cmFudCIsIm1lZGlhIiwiYXBwZW5kIiwiV2VicF9sYXJnZSIsIldlYlBfbWVkaXVtIiwiV2ViUF9zbWFsbCIsIkpwZ19vcmlnaW5hbCIsIkpwZ19sYXJnZSIsIkpwZ19tZWRpdW0iLCJpbWFnZV9zbWFsbCIsImFsdCIsInBob3RvX2Rlc2NyaXB0aW9uIiwiY3Vpc2luZV90eXBlIiwib3BlcmF0aW5nX2hvdXJzIiwiZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwiLCJmaWxsUmV2aWV3c0hUTUwiLCJvcGVyYXRpbmdIb3VycyIsImhvdXJzIiwia2V5Iiwicm93IiwiZGF5IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJ0aW1lIiwicmV2aWV3cyIsImNvbnRhaW5lciIsInRpdGxlIiwibm9SZXZpZXdzIiwidWwiLCJmb3JFYWNoIiwicmV2aWV3IiwiY3JlYXRlUmV2aWV3SFRNTCIsImxpIiwiaGVhZGVyIiwiZGF0ZSIsImJvZHkiLCJyYXRpbmciLCJpY29uIiwiY29tbWVudHMiLCJicmVhZGNydW1iIiwidXJsIiwibG9jYXRpb24iLCJocmVmIiwicmVwbGFjZSIsInJlc3VsdHMiLCJSZWdFeHAiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxXQUNKLElBQUlDLElBS0pDLE9BQU9DLFFBQVUsTUFDZkMsdUJBQXVCLENBQUNDLEVBQU9MLEtBQ3pCSyxFQUNGQyxRQUFRRCxNQUFNQSxJQUVkRSxLQUFLTixJQUFNLElBQUlPLE9BQU9DLEtBQUtDLElBQUlDLFNBQVNDLGVBQWUsUUFDckRDLEtBQU0sR0FDTkMsT0FBUWQsRUFBV2UsT0FDbkJDLGFBQWEsSUFFZkMsaUJBQ0FDLFNBQVNDLHVCQUF1QlosS0FBS1AsV0FBWU8sS0FBS04sVUFRNURHLHVCQUF5QixDQUFDZ0IsSUFDeEIsR0FBSWIsS0FBS1AsV0FFUCxZQURBb0IsRUFBUyxLQUFNYixLQUFLUCxZQUd0QixNQUFNcUIsRUFBS0MsbUJBQW1CLE1BQ3pCRCxFQUlISCxTQUFTSyxvQkFBb0JGLEVBQUksQ0FBQ2hCLEVBQU9MLEtBQ3ZDTyxLQUFLUCxXQUFhQSxFQUNiQSxHQUlMd0IscUJBQ0FKLEVBQVMsS0FBTXBCLElBSmJNLFFBQVFELE1BQU1BLE1BTmxCQSxNQUFRLDBCQUNSZSxFQUFTZixNQUFPLFNBaUJwQm1CLG1CQUFxQixFQUFDeEIsRUFBYU8sS0FBS1AsY0FDekJXLFNBQVNDLGVBQWUsbUJBQ2hDYSxVQUFZekIsRUFBVzBCLEtBRVpmLFNBQVNDLGVBQWUsc0JBQ2hDYSxVQUFZekIsRUFBVzJCLFFBRS9CLE1BQU1DLEVBQVVqQixTQUFTQyxlQUFlLG9CQUdsQ2lCLEVBQWdCbEIsU0FBU21CLGNBQWMsVUFDN0NELEVBQWNFLEtBQU8sYUFDckJGLEVBQWNHLE9BQVNkLFNBQVNlLHVCQUF1QmpDLEVBQVksV0FBWSxRQUMvRTZCLEVBQWNLLE1BQVEsMEZBRXRCTixFQUFRTyxPQUFPTixHQUVmLE1BQU1PLEVBQWF6QixTQUFTbUIsY0FBYyxVQUMxQ00sRUFBV0wsS0FB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ZXQgcmVzdGF1cmFudDtcbnZhciBtYXA7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBHb29nbGUgbWFwLCBjYWxsZWQgZnJvbSBIVE1MLlxuICovXG53aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcbiAgZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCgoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcbiAgICAgICAgem9vbTogMTYsXG4gICAgICAgIGNlbnRlcjogcmVzdGF1cmFudC5sYXRsbmcsXG4gICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICBmaWxsQnJlYWRjcnVtYigpO1xuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubWFwKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCBjdXJyZW50IHJlc3RhdXJhbnQgZnJvbSBwYWdlIFVSTC5cbiAqL1xuZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCA9IChjYWxsYmFjaykgPT4ge1xuICBpZiAoc2VsZi5yZXN0YXVyYW50KSB7IC8vIHJlc3RhdXJhbnQgYWxyZWFkeSBmZXRjaGVkIVxuICAgIGNhbGxiYWNrKG51bGwsIHNlbGYucmVzdGF1cmFudClcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgaWQgPSBnZXRQYXJhbWV0ZXJCeU5hbWUoJ2lkJyk7XG4gIGlmICghaWQpIHsgLy8gbm8gaWQgZm91bmQgaW4gVVJMXG4gICAgZXJyb3IgPSAnTm8gcmVzdGF1cmFudCBpZCBpbiBVUkwnXG4gICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICB9IGVsc2Uge1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuICAgICAgc2VsZi5yZXN0YXVyYW50ID0gcmVzdGF1cmFudDtcbiAgICAgIGlmICghcmVzdGF1cmFudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZmlsbFJlc3RhdXJhbnRIVE1MKCk7XG4gICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlXG4gKi9cbmZpbGxSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50ID0gc2VsZi5yZXN0YXVyYW50KSA9PiB7XG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1uYW1lJyk7XG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1hZGRyZXNzJyk7XG4gIGFkZHJlc3MuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5hZGRyZXNzO1xuXG4gIGNvbnN0IHBpY3R1cmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1waG90bycpO1xuXG4gIC8qIFNvdXJjZXMgV2ViUCBJbWFnZXMgKi9cbiAgY29uc3QgV2VicF9vcmlnaW5hbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzb3VyY2VcIik7XG4gIFdlYnBfb3JpZ2luYWwudHlwZSA9IFwiaW1hZ2Uvd2VicFwiO1xuICBXZWJwX29yaWdpbmFsLnNyY3NldCA9IERCSGVscGVyLmltYWdlUmVzcEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgJ29yaWdpbmFsJywgJ3dlYnAnKTtcbiAgV2VicF9vcmlnaW5hbC5tZWRpYSA9IGAobWluLXdpZHRoOiA2NjFweCkgYW5kIChtYXgtd2lkdGg6IDg2MHB4KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKG1pbi13aWR0aDogMTUwMSlgO1xuICBwaWN0dXJlLmFwcGVuZChXZWJwX29yaWdpbmFsKTtcblxuICBjb25zdCBXZWJwX2xhcmdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKTtcbiAgV2VicF9sYXJnZS50eXBlID0gXCJpbWFnZS93ZWJwXCI7XG4gIFdlYnBfbGFyZ2Uuc3Jjc2V0ID0gREJIZWxwZXIuaW1hZ2VSZXNwRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCAnbGFyZ2UnLCAnd2VicCcpO1xuICBXZWJwX2xhcmdlLm1lZGlhID0gYChtaW4td2lkdGg6IDQ2MXB4KSBhbmQgKG1heC13aWR0aDogNjYwcHgpLCBcbiAgICAgICAgICAgICAgICAgICAgICAobWluLXdpZHRoOiAxMDYxcHgpIGFuZCAobWF4LXdpZHRoOiAxNTAwcHgpYDtcbiAgcGljdHVyZS5hcHBlbmQoV2VicF9sYXJnZSk7XG5cbiAgY29uc3QgV2ViUF9tZWRpdW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic291cmNlXCIpO1xuICBXZWJQX21lZGl1bS50eXBlID0gXCJpbWFnZS93ZWJwXCI7XG4gIFdlYlBfbWVkaXVtLnNyY3NldCA9IERCSGVscGVyLmltYWdlUmVzcEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgJ21lZGl1bScsICd3ZWJwJyk7XG4gIFdlYlBfbWVkaXVtLm1lZGlhID0gYChtaW4td2lkdGg6IDM2MXB4KSBhbmQgKG1heC13aWR0aDogNDYwcHgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgKG1pbi13aWR0aDogODYxcHgpIGFuZCAobWF4LXdpZHRoOiAxMDYwcHgpYDtcbiAgcGljdHVyZS5hcHBlbmQoV2ViUF9tZWRpdW0pO1xuXG4gIGNvbnN0IFdlYlBfc21hbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic291cmNlXCIpO1xuICBXZWJQX3NtYWxsLnR5cGUgPSBcImltYWdlL3dlYnBcIjtcbiAgV2ViUF9zbWFsbC5zcmNzZXQgPSBEQkhlbHBlci5pbWFnZVJlc3BGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsICdzbWFsbCcsICd3ZWJwJyk7XG4gIFdlYlBfc21hbGwubWVkaWEgPSBgKG1heC13aWR0aDogMzYwcHgpYDtcbiAgcGljdHVyZS5hcHBlbmQoV2ViUF9zbWFsbCk7XG5cbiAgLyogU291cmNlcyBKUEVHIEltYWdlcyAqL1xuICBjb25zdCBKcGdfb3JpZ2luYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic291cmNlXCIpO1xuICBKcGdfb3JpZ2luYWwudHlwZSA9IFwiaW1hZ2UvanBlZ1wiO1xuICBKcGdfb3JpZ2luYWwuc3Jjc2V0ID0gREJIZWxwZXIuaW1hZ2VSZXNwRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCAnb3JpZ2luYWwnKTtcbiAgSnBnX29yaWdpbmFsLm1lZGlhID0gYChtaW4td2lkdGg6IDY2MXB4KSBhbmQgKG1heC13aWR0aDogODYwcHgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgKG1pbi13aWR0aDogMTUwMSlgO1xuICBwaWN0dXJlLmFwcGVuZChKcGdfb3JpZ2luYWwpO1xuXG4gIGNvbnN0IEpwZ19sYXJnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzb3VyY2VcIik7XG4gIEpwZ19sYXJnZS50eXBlID0gXCJpbWFnZS9qcGVnXCI7XG4gIEpwZ19sYXJnZS5zcmNzZXQgPSBEQkhlbHBlci5pbWFnZVJlc3BGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsICdsYXJnZScpO1xuICBKcGdfbGFyZ2UubWVkaWEgPSBgKG1pbi13aWR0aDogNDYxcHgpIGFuZCAobWF4LXdpZHRoOiA2NjBweCksIFxuICAgICAgICAgICAgICAgICAgICAgIChtaW4td2lkdGg6IDEwNjFweCkgYW5kIChtYXgtd2lkdGg6IDE1MDBweClgO1xuICBwaWN0dXJlLmFwcGVuZChKcGdfbGFyZ2UpO1xuXG4gIGNvbnN0IEpwZ19tZWRpdW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic291cmNlXCIpO1xuICBKcGdfbWVkaXVtLnR5cGUgPSBcImltYWdlL2pwZWdcIjtcbiAgSnBnX21lZGl1bS5zcmNzZXQgPSAgREJIZWxwZXIuaW1hZ2VSZXNwRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCAnbWVkaXVtJyk7XG4gIEpwZ19tZWRpdW0ubWVkaWEgPSBgKG1pbi13aWR0aDogMzYxcHgpIGFuZCAobWF4LXdpZHRoOiA0NjBweCksXG4gICAgICAgICAgICAgICAgICAgICAgKG1pbi13aWR0aDogODYxcHgpIGFuZCAobWF4LXdpZHRoOiAxMDYwcHgpYDtcbiAgcGljdHVyZS5hcHBlbmQoSnBnX21lZGl1bSk7XG5cbiAgY29uc3QgaW1hZ2Vfc21hbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICBpbWFnZV9zbWFsbC50eXBlID0gXCJpbWFnZS9qcGVnXCI7XG4gIGltYWdlX3NtYWxsLnNyY3NldCA9IERCSGVscGVyLmltYWdlUmVzcEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgJ3NtYWxsJyk7XG4gIGltYWdlX3NtYWxsLm1lZGlhID0gYChtYXgtd2lkdGg6IDM2MHB4KWA7XG4gIGltYWdlX3NtYWxsLmFsdCA9IGAke3Jlc3RhdXJhbnQubmFtZX0gLSAke3Jlc3RhdXJhbnQucGhvdG9fZGVzY3JpcHRpb259YDtcbiAgcGljdHVyZS5hcHBlbmQoaW1hZ2Vfc21hbGwpO1xuXG4gIGNvbnN0IGN1aXNpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1jdWlzaW5lJyk7XG4gIGN1aXNpbmUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5jdWlzaW5lX3R5cGU7XG5cbiAgLy8gZmlsbCBvcGVyYXRpbmcgaG91cnNcbiAgaWYgKHJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSB7XG4gICAgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwoKTtcbiAgfVxuICAvLyBmaWxsIHJldmlld3NcbiAgZmlsbFJldmlld3NIVE1MKCk7XG59XG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgb3BlcmF0aW5nIGhvdXJzIEhUTUwgdGFibGUgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAqL1xuZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwgPSAob3BlcmF0aW5nSG91cnMgPSBzZWxmLnJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSA9PiB7XG4gIGNvbnN0IGhvdXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaG91cnMnKTtcbiAgZm9yIChsZXQga2V5IGluIG9wZXJhdGluZ0hvdXJzKSB7XG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgZGF5LmlubmVySFRNTCA9IGtleTtcbiAgICBkYXkuY2xhc3NOYW1lID0gJ2RheSc7XG4gICAgcm93LmFwcGVuZENoaWxkKGRheSk7XG5cbiAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICB0aW1lLmlubmVySFRNTCA9IG9wZXJhdGluZ0hvdXJzW2tleV07XG4gICAgdGltZS5jbGFzc05hbWUgPSAndGltZSc7XG4gICAgcm93LmFwcGVuZENoaWxkKHRpbWUpO1xuXG4gICAgaG91cnMuYXBwZW5kQ2hpbGQocm93KTtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhbGwgcmV2aWV3cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cbiAqL1xuZmlsbFJldmlld3NIVE1MID0gKHJldmlld3MgPSBzZWxmLnJlc3RhdXJhbnQucmV2aWV3cykgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1jb250YWluZXInKTtcbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICB0aXRsZS5pbm5lckhUTUwgPSAnUmV2aWV3cyc7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgaWYgKCFyZXZpZXdzKSB7XG4gICAgY29uc3Qgbm9SZXZpZXdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIG5vUmV2aWV3cy5pbm5lckhUTUwgPSAnTm8gcmV2aWV3cyB5ZXQhJztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm9SZXZpZXdzKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0Jyk7XG4gIHJldmlld3MuZm9yRWFjaChyZXZpZXcgPT4ge1xuICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSk7XG4gIH0pO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodWwpO1xufVxuXG4vKipcbiAqIENyZWF0ZSByZXZpZXcgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlLlxuICovXG5jcmVhdGVSZXZpZXdIVE1MID0gKHJldmlldykgPT4ge1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGxpLmNsYXNzTmFtZSA9ICdyZXZpZXdfX2NhcmQnO1xuICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgaGVhZGVyLmNsYXNzTmFtZSA9ICdyZXZpZXdfX2hlYWRlcic7XG5cbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2g0Jyk7XG4gIG5hbWUuaW5uZXJIVE1MID0gcmV2aWV3Lm5hbWU7XG4gIG5hbWUuY2xhc3NOYW1lID0gJ3Jldmlld19fbmFtZSc7XG4gIGhlYWRlci5hcHBlbmRDaGlsZChuYW1lKTtcblxuICBjb25zdCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICBkYXRlLmlubmVySFRNTCA9IHJldmlldy5kYXRlO1xuICBkYXRlLmNsYXNzTmFtZSA9ICdyZXZpZXdfX2RhdGUnO1xuICBoZWFkZXIuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgbGkuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcblxuICBjb25zdCBib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGJvZHkuY2xhc3NOYW1lID0gJ3Jldmlld19fYm9keSc7XG5cbiAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICByYXRpbmcuaW5uZXJIVE1MID0gYFJhdGluZzogJHtyZXZpZXcucmF0aW5nfWA7XG4gIHJhdGluZy5jbGFzc05hbWUgPSAncmV2aWV3X19yYXRpbmcnO1xuICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuICBpY29uLmNsYXNzTmFtZSA9ICdmYXMgZmEtc3Rhcic7XG4gIHJhdGluZy5hcHBlbmRDaGlsZChpY29uKTtcbiAgYm9keS5hcHBlbmRDaGlsZChyYXRpbmcpO1xuXG4gIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBjb21tZW50cy5pbm5lckhUTUwgPSByZXZpZXcuY29tbWVudHM7XG4gIGNvbW1lbnRzLmNsYXNzTmFtZSA9ICdyZXZpZXdfX2NvbW1lbnRzJztcbiAgYm9keS5hcHBlbmRDaGlsZChjb21tZW50cyk7XG5cbiAgbGkuYXBwZW5kQ2hpbGQoYm9keSk7XG5cbiAgcmV0dXJuIGxpO1xufVxuXG4vKipcbiAqIEFkZCByZXN0YXVyYW50IG5hbWUgdG8gdGhlIGJyZWFkY3J1bWIgbmF2aWdhdGlvbiBtZW51XG4gKi9cbmZpbGxCcmVhZGNydW1iID0gKHJlc3RhdXJhbnQ9c2VsZi5yZXN0YXVyYW50KSA9PiB7XG4gIGNvbnN0IGJyZWFkY3J1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWRjcnVtYicpO1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGxpLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSk7XG59XG5cbi8qKlxuICogR2V0IGEgcGFyYW1ldGVyIGJ5IG5hbWUgZnJvbSBwYWdlIFVSTC5cbiAqL1xuZ2V0UGFyYW1ldGVyQnlOYW1lID0gKG5hbWUsIHVybCkgPT4ge1xuICBpZiAoIXVybClcbiAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgJ1xcXFwkJicpO1xuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFs/Jl0ke25hbWV9KD0oW14mI10qKXwmfCN8JClgKSxcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xuICBpZiAoIXJlc3VsdHMpXG4gICAgcmV0dXJuIG51bGw7XG4gIGlmICghcmVzdWx0c1syXSlcbiAgICByZXR1cm4gJyc7XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XG59XG4iXX0=
